<div class="container-fluid">
  <div class="row">
    <div class="card">
      <div class="col-lg-12">
        <div class="row justify-content-center">
          <div class="card-body">
            <h2 class="card-title text-center">
              PATÓGENOS QUE ATACAN A LOS CULTIVOS
            </h2>
            <div class="row mb-6">
              <div class="col-lg-12 col-sm-12 d-flex justify-content-center">
                <div class="search-box me-2">
                  <div class="position-relative">
                    <!-- Vincula el valor del cuadro de búsqueda al modelo -->
                    <input
                      type="text"
                      class="form-control color mt-4"
                      placeholder="Buscar..."
                      [(ngModel)]="searchTerm"
                      (input)="filterCards()"
                    />
                    <i class="bx bx-search-alt search-icon"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="row"
            infiniteScroll
            [infiniteScrollDistance]="2"
            [infiniteScrollThrottle]="30"
            (scrolled)="onScroll()"
          ></div>
          <!-- Loop sobre el array filtrado -->
          <div class="col-xl-3 col-sm-6" *ngFor="let causa of filteredCausas">
            <div class="card product-card">
              <div class="card-body">
                <div class="product-img position-relative">
                  <div class="mt-4 text-center">
                    <h5 class="mb-3 text-truncate">{{ causa.tipoTC }}</h5>
                  </div>
                  <div
                    class="card border-0 rounded-3 overflow-hidden img-ycard"
                  >
                    <img
                      [src]="causa.imagen"
                      class="img-fluid mx-auto d-block card-image"
                    />
                  </div>
                </div>
                <div class="mt-4 text-center">
                  <div class="">
                    <button
                      type="button"
                      class="btn btnDetalle"
                      (click)="verDetalle(causa.idTipoCausa)"
                    >
                      <i class="fas fa-long-arrow-alt-right"></i> Ver detalle
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row" *ngIf="filteredCausas.length === 0">
            <div class="col-lg-12 text-center">
              <p>No se encontraron datos para su busqueda.</p>
            </div>
          </div>
          <!-- end row -->
        </div>
      </div>
    </div>
    <!-- end row -->
  </div>
</div>
